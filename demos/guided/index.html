<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus ‚Äî Guided Intelligence Demo</title>
    <link rel="icon" type="image/png" href="/logo.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Esri ArcGIS -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.28/esri/themes/dark/main.css">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main App -->
    <div class="app">
        <!-- Left: Intel Feed -->
        <aside class="intel-feed" id="intelFeed">
            <div class="feed-header">
                <span class="feed-title">üî¥ Live Intelligence</span>
                <span class="feed-badge">LIVE</span>
            </div>
            <div class="feed-items" id="feedItems"></div>
        </aside>

        <!-- Center: Map -->
        <main class="center-panel">
            <div class="center-header">
                <div class="view-tabs" id="viewTabs">
                    <button class="tab active" id="mapTab" data-view="map">üó∫Ô∏è Map</button>
                    <button class="tab" id="analyticsTab" data-view="analytics">üìä Analytics</button>
                </div>
                <div class="partners">
                    <span>Powered by Esri</span>
                    <span>Rebirth Analytics</span>
                    <span>Allianz Trade</span>
                </div>
            </div>
            
            <!-- Map View -->
            <div class="map-container" id="mapContainer">
                <div id="mapView"></div>
                <div class="weather-card" id="weatherCard">
                    <div class="weather-header">üå©Ô∏è LIVE WEATHER INTEL</div>
                    <div class="weather-meta">NOAA Advisory: 14:32 UTC ‚Ä¢ Confidence: 0.89</div>
                    <div class="weather-alert">
                        <strong>Winter Storm Warning</strong><br>
                        Severe winter storm approaching Chicago metro. 8-12 inches expected over 48 hours.
                    </div>
                    <div class="weather-stats">
                        <div class="stat"><span class="label">Chicago</span><span class="value">28¬∞F</span></div>
                        <div class="stat"><span class="label">Wind</span><span class="value">35 mph</span></div>
                        <div class="stat"><span class="label">Visibility</span><span class="value">0.5 mi</span></div>
                        <div class="stat"><span class="label">Roads</span><span class="value red">Hazardous</span></div>
                    </div>
                </div>
                
                <!-- Legend -->
                <div class="map-legend">
                    <div class="legend-item"><span class="dot red"></span> At-Risk Store</div>
                    <div class="legend-item"><span class="dot amber"></span> Weather Impact</div>
                    <div class="legend-item"><span class="dot green"></span> Unaffected Store</div>
                    <div class="legend-item"><span class="dot blue square"></span> Distribution Center</div>
                </div>
            </div>
            
            <!-- Analytics View -->
            <div class="analytics-container" id="analyticsContainer">
                <div class="analytics-grid">
                    <div class="analytics-card red"><div class="card-label">Total Exposure</div><div class="card-value">$4.2M</div></div>
                    <div class="analytics-card amber"><div class="card-label">Stores at Risk</div><div class="card-value">12</div></div>
                    <div class="analytics-card amber"><div class="card-label">Suppliers Affected</div><div class="card-value">8</div></div>
                    <div class="analytics-card gold"><div class="card-label">Time to Impact</div><div class="card-value">48 hrs</div></div>
                </div>
                <div class="analytics-table">
                    <h3>üì¶ Critical Stores</h3>
                    <table>
                        <thead><tr><th>Store</th><th>Location</th><th>Exposure</th><th>Risk</th></tr></thead>
                        <tbody>
                            <tr><td>Chicago Loop</td><td>Chicago, IL</td><td>$420K</td><td class="critical">Critical</td></tr>
                            <tr><td>Des Plaines</td><td>Des Plaines, IL</td><td>$380K</td><td class="critical">Critical</td></tr>
                            <tr><td>Oak Park</td><td>Oak Park, IL</td><td>$350K</td><td class="critical">Critical</td></tr>
                            <tr><td>Evanston</td><td>Evanston, IL</td><td>$290K</td><td class="warning">Warning</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>

        <!-- Right: Chat -->
        <aside class="chat-panel" id="chatPanel">
            <div class="chat-header">
                <div class="nexus-brand"><span class="nexus-icon">N</span> Nexus</div>
                <div class="kpi-strip">
                    <div class="kpi"><span class="kpi-label">EXPOSURE</span><span class="kpi-value red">$4.2M</span></div>
                    <div class="kpi"><span class="kpi-label">STORES</span><span class="kpi-value amber">12</span></div>
                    <div class="kpi"><span class="kpi-label">PROTECTED</span><span class="kpi-value" id="kpiProtected">$0</span></div>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-chips" id="chatChips"></div>
            <div class="chat-input-area">
                <input type="text" placeholder="Ask Nexus anything..." id="chatInput" disabled>
                <button id="sendBtn" disabled>Send ‚Üí</button>
            </div>
        </aside>
    </div>

    <!-- Tour Card (positioned, no overlay) -->
    <div class="tour-card pos-center" id="tourCard">
        <div class="tour-progress" id="tourProgress"></div>
        <div class="tour-step-label" id="tourStepLabel"></div>
        <h2 class="tour-title" id="tourTitle"></h2>
        <div class="tour-content" id="tourContent"></div>
        <div class="tour-actions" id="tourActions"></div>
    </div>

    <!-- Arrow pointer -->
    <div class="tour-arrow" id="tourArrow">
        <svg width="80" height="80" viewBox="0 0 80 80">
            <path d="M10 70 L70 10 M70 10 L70 35 M70 10 L45 10" 
                  stroke="#d4af37" stroke-width="4" fill="none" 
                  stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

    <!-- Scripts -->
    <script src="https://js.arcgis.com/4.28/"></script>
    <script src="demo.js"></script>
</body>
</html>

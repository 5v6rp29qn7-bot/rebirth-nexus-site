<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <title>Nexus ‚Äî Contested Logistics Intelligence</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.28/esri/themes/dark/main.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a24;
            --text-primary: #f0f0f5;
            --text-secondary: #a0a0b0;
            --text-muted: #606070;
            --gold: #d4af37;
            --green: #10b981;
            --cyan: #22d3ee;
            --amber: #f59e0b;
            --red: #ef4444;
            --border: #2a2a3a;
        }
        html, body { height: 100%; overflow: hidden; background: var(--bg-primary); font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; color: var(--text-primary); }
        
        /* === PASSWORD GATE === */
        .password-gate {
            position: fixed;
            inset: 0;
            background: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        .password-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        .password-logo {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--gold), #b8960c);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 28px;
            color: #000;
            margin: 0 auto 20px;
        }
        .password-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .password-subtitle {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 24px;
        }
        .password-input {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 15px;
            text-align: center;
            margin-bottom: 16px;
            outline: none;
            transition: border-color 0.2s;
        }
        .password-input:focus {
            border-color: var(--gold);
        }
        .password-input.error {
            border-color: var(--red);
            animation: shake 0.4s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }
        .password-btn {
            width: 100%;
            padding: 14px;
            background: var(--gold);
            color: #000;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        .password-btn:hover {
            background: #e5c048;
        }
        .password-error {
            color: var(--red);
            font-size: 13px;
            margin-top: 12px;
            display: none;
        }
        .password-error.show {
            display: block;
        }
        
        /* === MAIN APP (hidden until authenticated) === */
        .app-container { display: none; flex-direction: column; height: 100%; }
        .app-container.authenticated { display: flex; }
        
        .main-content { display: flex; flex: 1; overflow: hidden; }
        
        /* === INTEL FEED === */
        .intel-feed { width: 280px; background: var(--bg-secondary); border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; }
        .feed-header { padding: 14px 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
        .feed-title { font-size: 13px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
        .feed-live { font-size: 10px; background: rgba(239,68,68,0.2); color: var(--red); padding: 4px 10px; border-radius: 10px; display: flex; align-items: center; gap: 5px; }
        .feed-live::before { content: ""; width: 6px; height: 6px; background: var(--red); border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        .feed-items { flex: 1; overflow-y: auto; padding: 12px; }
        .feed-item { background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 10px; padding: 14px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s; }
        .feed-item:hover { border-color: var(--gold); }
        .feed-item.critical { border-left: 4px solid var(--red); }
        .feed-item.warning { border-left: 4px solid var(--amber); }
        .feed-item-badge { display: inline-block; font-size: 9px; font-weight: 600; text-transform: uppercase; padding: 3px 8px; border-radius: 4px; margin-bottom: 8px; }
        .feed-item-badge.threat { background: rgba(239,68,68,0.2); color: var(--red); }
        .feed-item-badge.advisory { background: rgba(245,158,11,0.2); color: var(--amber); }
        .feed-item-time { font-size: 10px; color: var(--text-muted); margin-bottom: 6px; }
        .feed-item-title { font-size: 13px; font-weight: 600; margin-bottom: 6px; }
        .feed-item-detail { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }
        .feed-item-exposure { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; font-size: 11px; }
        .feed-item-exposure .label { color: var(--text-muted); }
        .feed-item-exposure .value { font-weight: 700; font-family: 'SF Mono', monospace; }
        .feed-item-exposure .value.red { color: var(--red); }
        
        /* === CENTER PANEL === */
        .center-panel { flex: 1; display: flex; flex-direction: column; position: relative; }
        .center-header { padding: 12px 16px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; background: var(--bg-secondary); }
        .view-toggle { display: flex; gap: 4px; background: var(--bg-tertiary); padding: 4px; border-radius: 8px; }
        .view-btn { padding: 8px 16px; border-radius: 6px; font-size: 13px; font-weight: 500; border: none; background: transparent; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; }
        .view-btn.active { background: var(--gold); color: #000; }
        .view-btn:hover:not(.active) { color: var(--text-primary); }
        .view-btn.tour-highlight { animation: btnPulse 1.5s infinite; box-shadow: 0 0 0 3px rgba(212,175,55,0.4); }
        @keyframes btnPulse { 0%, 100% { box-shadow: 0 0 0 3px rgba(212,175,55,0.4); } 50% { box-shadow: 0 0 0 6px rgba(212,175,55,0.2); } }
        
        .partner-badges { display: flex; gap: 12px; align-items: center; }
        .partner-badge { font-size: 11px; color: var(--text-muted); opacity: 0.6; padding: 4px 8px; border-radius: 4px; }
        
        .map-container { flex: 1; position: relative; }
        #mapView { position: absolute; inset: 0; }
        .map-container.hidden { display: none; }
        
        /* Threat Overlay */
        .threat-overlay { position: absolute; top: 16px; right: 16px; background: rgba(10,10,15,0.95); border: 1px solid var(--border); border-radius: 12px; padding: 14px; z-index: 100; width: 280px; }
        .threat-title { font-size: 11px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px; display: flex; align-items: center; gap: 6px; }
        .threat-alert { background: rgba(239,68,68,0.15); border: 1px solid var(--red); border-radius: 8px; padding: 10px; margin-bottom: 10px; }
        .threat-alert-title { font-weight: 600; font-size: 12px; color: var(--red); margin-bottom: 3px; }
        .threat-alert-text { font-size: 11px; color: var(--text-secondary); line-height: 1.4; }
        .threat-data { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
        .threat-item { background: var(--bg-tertiary); padding: 6px 8px; border-radius: 6px; text-align: center; }
        .threat-item-label { font-size: 9px; color: var(--text-muted); }
        .threat-item-value { font-size: 13px; font-weight: 600; margin-top: 2px; }
        .threat-meta { font-size: 10px; color: var(--text-muted); margin-top: 10px; padding-top: 8px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; }
        
        .map-legend { position: absolute; bottom: 16px; left: 16px; background: rgba(10,10,15,0.9); border: 1px solid var(--border); border-radius: 8px; padding: 10px 12px; z-index: 100; }
        .legend-title { font-size: 10px; color: var(--text-muted); margin-bottom: 6px; text-transform: uppercase; }
        .legend-item { display: flex; align-items: center; gap: 6px; font-size: 11px; margin-bottom: 4px; }
        .legend-dot { width: 8px; height: 8px; border-radius: 50%; }
        .legend-dot.red { background: var(--red); }
        .legend-dot.amber { background: var(--amber); }
        .legend-dot.green { background: var(--green); }
        .legend-dot.blue { background: var(--cyan); }
        
        /* Analytics View */
        .analytics-view { flex: 1; overflow-y: auto; padding: 20px; display: none; }
        .analytics-view.active { display: block; }
        .analytics-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px; }
        .analytics-card { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 10px; padding: 16px; }
        .analytics-card.wide { grid-column: span 2; }
        .analytics-card.full { grid-column: span 4; }
        .analytics-label { font-size: 10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px; }
        .analytics-value { font-size: 24px; font-weight: 700; }
        .analytics-value.red { color: var(--red); }
        .analytics-value.green { color: var(--green); }
        .analytics-value.amber { color: var(--amber); }
        .analytics-value.gold { color: var(--gold); }
        .analytics-trend { font-size: 11px; color: var(--text-secondary); margin-top: 4px; }
        
        .asset-table { width: 100%; border-collapse: collapse; }
        .asset-table th { text-align: left; font-size: 10px; color: var(--text-muted); text-transform: uppercase; padding: 8px 12px; border-bottom: 1px solid var(--border); }
        .asset-table td { padding: 10px 12px; font-size: 12px; border-bottom: 1px solid var(--border); }
        .asset-table tr:hover { background: var(--bg-tertiary); }
        .status-badge { font-size: 10px; padding: 3px 8px; border-radius: 4px; font-weight: 500; }
        .status-badge.critical { background: rgba(239,68,68,0.2); color: var(--red); }
        .status-badge.warning { background: rgba(245,158,11,0.2); color: var(--amber); }
        .status-badge.ok { background: rgba(16,185,129,0.2); color: var(--green); }
        
        /* === CHAT PANEL === */
        .chat-panel { width: 380px; background: var(--bg-secondary); border-left: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; }
        .chat-header { padding: 14px 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 12px; }
        .logo-icon { width: 36px; height: 36px; background: linear-gradient(135deg, var(--gold), #b8960c); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 16px; color: #000; }
        .logo-text { font-weight: 600; font-size: 15px; }
        .logo-sub { font-size: 9px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }
        .tour-restart { margin-left: auto; background: transparent; border: 1px solid var(--border); color: var(--text-secondary); padding: 6px 12px; border-radius: 6px; font-size: 11px; cursor: pointer; }
        .tour-restart:hover { border-color: var(--gold); color: var(--gold); }
        
        .kpi-strip { display: flex; border-bottom: 1px solid var(--border); padding: 10px 16px; gap: 16px; }
        .kpi-mini { flex: 1; text-align: center; }
        .kpi-mini-label { font-size: 9px; color: var(--text-muted); text-transform: uppercase; margin-bottom: 2px; }
        .kpi-mini-value { font-size: 15px; font-weight: 700; font-family: 'SF Mono', monospace; }
        .kpi-mini-value.red { color: var(--red); }
        .kpi-mini-value.amber { color: var(--amber); }
        .kpi-mini-value.green { color: var(--green); }
        
        .chat-messages { flex: 1; overflow-y: auto; padding: 16px; }
        .message { margin-bottom: 16px; }
        .message.assistant { background: var(--bg-tertiary); border-radius: 12px; padding: 14px; }
        .message.user { background: rgba(212,175,55,0.15); border-radius: 12px; padding: 12px 14px; margin-left: 40px; }
        .message-content { font-size: 13px; line-height: 1.6; }
        .message-content p { margin-bottom: 10px; }
        .message-content p:last-child { margin-bottom: 0; }
        .message-content strong { color: var(--gold); }
        
        /* Viz Cards in chat */
        .viz-cards { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin: 12px 0; }
        .viz-card { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 10px; text-align: center; }
        .viz-card .label { font-size: 10px; color: var(--text-muted); margin-bottom: 2px; }
        .viz-card .value { font-size: 18px; font-weight: 700; font-family: 'SF Mono', monospace; }
        .viz-card .value.red { color: var(--red); }
        .viz-card .value.amber { color: var(--amber); }
        .viz-card .value.green { color: var(--green); }
        .viz-card .value.gold { color: var(--gold); }
        
        /* Viz List */
        .viz-list { background: var(--bg-secondary); border-radius: 10px; padding: 12px; margin: 12px 0; }
        .viz-list-title { font-size: 11px; font-weight: 600; margin-bottom: 10px; color: var(--text-muted); }
        .viz-list-item { display: flex; align-items: center; gap: 10px; padding: 8px 0; border-bottom: 1px solid var(--border); }
        .viz-list-item:last-child { border-bottom: none; }
        .viz-status { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
        .viz-status.critical { background: var(--red); }
        .viz-status.high { background: var(--amber); }
        .viz-status.medium { background: var(--gold); }
        .viz-status.ok { background: var(--green); }
        .viz-info { flex: 1; min-width: 0; }
        .viz-name { font-size: 12px; font-weight: 600; }
        .viz-detail { font-size: 10px; color: var(--text-muted); margin-top: 2px; }
        .viz-value { font-size: 13px; font-weight: 700; font-family: 'SF Mono', monospace; flex-shrink: 0; }
        
        /* Viz Timeline */
        .viz-timeline { background: var(--bg-secondary); border-radius: 10px; padding: 12px 12px 12px 24px; margin: 12px 0; }
        .timeline-item { position: relative; padding-left: 20px; padding-bottom: 14px; border-left: 2px solid var(--border); }
        .timeline-item:last-child { padding-bottom: 0; border-left-color: transparent; }
        .timeline-marker { position: absolute; left: -6px; top: 2px; width: 10px; height: 10px; border-radius: 50%; }
        .timeline-marker.red { background: var(--red); }
        .timeline-marker.amber { background: var(--amber); }
        .timeline-marker.green { background: var(--green); }
        .timeline-time { font-size: 10px; color: var(--gold); font-weight: 600; margin-bottom: 2px; }
        .timeline-title { font-size: 12px; font-weight: 600; margin-bottom: 2px; }
        .timeline-desc { font-size: 11px; color: var(--text-secondary); line-height: 1.4; }
        
        .sources { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border); }
        .sources-label { font-size: 9px; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px; }
        .sources-list { display: flex; flex-wrap: wrap; gap: 4px; }
        .source-tag { font-size: 9px; background: rgba(212,175,55,0.1); color: var(--gold); padding: 3px 6px; border-radius: 4px; }
        
        .chips-section { padding: 12px 16px; border-top: 1px solid var(--border); }
        .chips-label { font-size: 10px; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase; }
        .chips-grid { display: flex; flex-wrap: wrap; gap: 6px; }
        .chip { background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 16px; padding: 8px 14px; font-size: 12px; cursor: pointer; transition: all 0.2s; }
        .chip:hover { border-color: var(--gold); color: var(--gold); }
        
        .chat-input-area { padding: 12px 16px; border-top: 1px solid var(--border); }
        .input-wrapper { display: flex; gap: 8px; }
        .chat-input { flex: 1; background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 10px; padding: 12px 14px; color: var(--text-primary); font-size: 13px; outline: none; }
        .chat-input:focus { border-color: var(--gold); }
        .send-btn { background: var(--gold); color: #000; border: none; padding: 12px 20px; border-radius: 10px; font-weight: 600; font-size: 13px; cursor: pointer; }
        .send-btn:hover { background: #e5c048; }
        
        /* Tour */
        .tour-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 9998; display: none; }
        .tour-overlay.active { display: block; }
        .tour-spotlight { position: fixed; box-shadow: 0 0 0 9999px rgba(0,0,0,0.85); border-radius: 12px; z-index: 9999; pointer-events: none; display: none; transition: all 0.4s ease; }
        .tour-spotlight.active { display: block; }
        .tour-card { position: fixed; background: var(--bg-secondary); border: 1px solid var(--gold); border-radius: 16px; padding: 24px; z-index: 10000; max-width: 400px; width: 90%; display: none; box-shadow: 0 20px 60px rgba(0,0,0,0.5); }
        .tour-card.active { display: block; }
        .tour-step-indicator { display: flex; gap: 6px; margin-bottom: 16px; }
        .tour-step-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--border); }
        .tour-step-dot.active { background: var(--gold); }
        .tour-step-dot.complete { background: var(--green); }
        .tour-label { font-size: 10px; color: var(--gold); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; }
        .tour-title { font-size: 18px; font-weight: 600; margin-bottom: 10px; }
        .tour-content { font-size: 13px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 20px; }
        .tour-content p { margin-bottom: 10px; }
        .tour-content .highlight { color: var(--gold); font-weight: 500; }
        .tour-buttons { display: flex; gap: 10px; justify-content: flex-end; }
        .tour-btn { padding: 10px 20px; border-radius: 8px; font-size: 13px; font-weight: 500; cursor: pointer; transition: all 0.2s; }
        .tour-btn.primary { background: var(--gold); color: #000; border: none; }
        .tour-btn.primary:hover { background: #e5c048; }
        .tour-btn.secondary { background: transparent; border: 1px solid var(--border); color: var(--text-secondary); }
        .tour-btn.secondary:hover { border-color: var(--gold); color: var(--gold); }
        
        /* POC Modal */
        .poc-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10001; display: none; align-items: center; justify-content: center; }
        .poc-modal.active { display: flex; }
        .poc-modal-content { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 20px; padding: 40px; max-width: 500px; width: 90%; text-align: center; }
        .poc-modal-title { font-size: 22px; font-weight: 600; margin-bottom: 10px; }
        .poc-modal-subtitle { font-size: 14px; color: var(--text-secondary); margin-bottom: 30px; }
        .poc-options { display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; }
        .poc-option { background: var(--bg-tertiary); border: 1px solid var(--border); border-radius: 12px; padding: 20px; text-align: left; cursor: pointer; transition: all 0.2s; }
        .poc-option:hover { border-color: var(--gold); }
        .poc-option-title { font-weight: 600; margin-bottom: 4px; }
        .poc-option-desc { font-size: 12px; color: var(--text-secondary); }
        .poc-close { background: transparent; border: 1px solid var(--border); color: var(--text-secondary); padding: 10px 20px; border-radius: 8px; cursor: pointer; font-size: 13px; }
        .poc-close:hover { border-color: var(--text-primary); color: var(--text-primary); }

        /* Typing indicator */
        .typing-indicator { display: flex; gap: 4px; padding: 14px; }
        .typing-dot { width: 8px; height: 8px; background: var(--text-muted); border-radius: 50%; animation: typingBounce 1.4s infinite; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typingBounce { 0%, 60%, 100% { transform: translateY(0); } 30% { transform: translateY(-8px); } }
    </style>
</head>
<body>
    <!-- PASSWORD GATE -->
    <div class="password-gate" id="passwordGate">
        <div class="password-box">
            <div class="password-logo">N</div>
            <div class="password-title">Nexus Demo Access</div>
            <div class="password-subtitle">Contested Logistics Intelligence</div>
            <input type="password" class="password-input" id="passwordInput" placeholder="Enter access code" autocomplete="off">
            <button class="password-btn" id="passwordBtn">Access Demo</button>
            <div class="password-error" id="passwordError">Incorrect access code. Please try again.</div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div class="app-container" id="appContainer">
        <div class="main-content">
            <!-- LEFT: Intel Feed -->
            <div class="intel-feed">
                <div class="feed-header">
                    <div class="feed-title">üì° Intel Feed</div>
                    <div class="feed-live">LIVE</div>
                </div>
                <div class="feed-items">
                    <div class="feed-item critical">
                        <div class="feed-item-badge threat">Threat Alert</div>
                        <div class="feed-item-time">12 min ago ‚Ä¢ DIA</div>
                        <div class="feed-item-title">Subic Bay Access Warning</div>
                        <div class="feed-item-detail">Maritime interdiction assets detected. Port access denial probable within 48-72h window.</div>
                        <div class="feed-item-exposure">
                            <span class="label">Exposure</span>
                            <span class="value red">$42M</span>
                        </div>
                    </div>
                    <div class="feed-item warning">
                        <div class="feed-item-badge advisory">Advisory</div>
                        <div class="feed-item-time">2 hrs ago ‚Ä¢ TRANSCOM</div>
                        <div class="feed-item-title">Guam Fuel Status</div>
                        <div class="feed-item-detail">Reserve levels at 62%. Scheduled resupply delayed 48h due to weather routing.</div>
                        <div class="feed-item-exposure">
                            <span class="label">Exposure</span>
                            <span class="value red">$38M</span>
                        </div>
                    </div>
                    <div class="feed-item">
                        <div class="feed-item-badge advisory">Advisory</div>
                        <div class="feed-item-time">4 hrs ago ‚Ä¢ Fleet Log</div>
                        <div class="feed-item-title">Yokosuka Parts Delay</div>
                        <div class="feed-item-detail">Critical repair components backordered. Two vessels in extended maintenance.</div>
                    </div>
                    <div class="feed-item">
                        <div class="feed-item-time">6 hrs ago ‚Ä¢ Allianz Trade</div>
                        <div class="feed-item-title">Shipping Lane Update</div>
                        <div class="feed-item-detail">Insurance premiums elevated for South China Sea transit. Alternative routing advisory in effect.</div>
                    </div>
                </div>
            </div>
            
            <!-- CENTER: Map/Analytics -->
            <div class="center-panel">
                <div class="center-header">
                    <div class="view-toggle">
                        <button class="view-btn active" data-view="map" id="mapViewBtn">üó∫Ô∏è Map</button>
                        <button class="view-btn" data-view="analytics" id="analyticsViewBtn">üìä Analytics</button>
                    </div>
                    <div class="partner-badges">
                        <span class="partner-badge">Powered by Esri</span>
                        <span class="partner-badge">Rebirth Analytics</span>
                    </div>
                </div>
                
                <div class="map-container" id="mapContainer">
                    <div id="mapView"></div>
                    <div class="threat-overlay">
                        <div class="threat-title">‚ö†Ô∏è Active Threat Assessment</div>
                        <div class="threat-alert">
                            <div class="threat-alert-title">Port Interdiction Warning</div>
                            <div class="threat-alert-text">Subic Bay access denial probable. 3 vessels with $42M cargo en route.</div>
                        </div>
                        <div class="threat-data">
                            <div class="threat-item">
                                <div class="threat-item-label">Confidence</div>
                                <div class="threat-item-value" style="color: var(--red)">HIGH</div>
                            </div>
                            <div class="threat-item">
                                <div class="threat-item-label">Window</div>
                                <div class="threat-item-value" style="color: var(--amber)">48-72h</div>
                            </div>
                            <div class="threat-item">
                                <div class="threat-item-label">Affected</div>
                                <div class="threat-item-value">7 nodes</div>
                            </div>
                            <div class="threat-item">
                                <div class="threat-item-label">Cascade</div>
                                <div class="threat-item-value" style="color: var(--red)">Theater</div>
                            </div>
                        </div>
                        <div class="threat-meta">
                            <span>Sources: DIA, INDOPACOM J2</span>
                            <span>Updated: 12m ago</span>
                        </div>
                    </div>
                    <div class="map-legend">
                        <div class="legend-title">Network Status</div>
                        <div class="legend-item"><span class="legend-dot red"></span> Critical</div>
                        <div class="legend-item"><span class="legend-dot amber"></span> Constrained</div>
                        <div class="legend-item"><span class="legend-dot green"></span> Operational</div>
                        <div class="legend-item"><span class="legend-dot blue"></span> Allied</div>
                    </div>
                </div>
                
                <div class="analytics-view" id="analyticsView">
                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <div class="analytics-label">Total Exposure</div>
                            <div class="analytics-value red">$127M</div>
                            <div class="analytics-trend">‚Üë 34% from baseline</div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-label">Nodes at Risk</div>
                            <div class="analytics-value amber">7</div>
                            <div class="analytics-trend">of 12 monitored</div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-label">Mitigation Cost</div>
                            <div class="analytics-value green">$3.35M</div>
                            <div class="analytics-trend">Recommended actions</div>
                        </div>
                        <div class="analytics-card">
                            <div class="analytics-label">Decision Window</div>
                            <div class="analytics-value gold">48h</div>
                            <div class="analytics-trend">Time-critical</div>
                        </div>
                        
                        <div class="analytics-card full">
                            <div class="analytics-label" style="margin-bottom: 12px;">Critical Assets</div>
                            <table class="asset-table">
                                <thead>
                                    <tr>
                                        <th>Asset</th>
                                        <th>Location</th>
                                        <th>Function</th>
                                        <th>Status</th>
                                        <th>Exposure</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>Subic Bay Port</td><td>Philippines</td><td>Naval Logistics</td><td><span class="status-badge critical">Critical</span></td><td>$42M</td></tr>
                                    <tr><td>Guam Fuel Depot</td><td>Guam</td><td>Fuel Storage</td><td><span class="status-badge warning">Constrained</span></td><td>$38M</td></tr>
                                    <tr><td>Yokosuka SRF</td><td>Japan</td><td>Ship Repair</td><td><span class="status-badge ok">Operational</span></td><td>$22M</td></tr>
                                    <tr><td>Darwin MRF</td><td>Australia</td><td>Maintenance</td><td><span class="status-badge ok">Operational</span></td><td>$15M</td></tr>
                                    <tr><td>Changi Naval Base</td><td>Singapore</td><td>Allied Support</td><td><span class="status-badge ok">Available</span></td><td>$10M</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- RIGHT: Chat -->
            <div class="chat-panel" id="chatPanel">
                <div class="chat-header">
                    <div class="logo-icon">N</div>
                    <div>
                        <div class="logo-text">Nexus</div>
                        <div class="logo-sub">Contested Logistics Intel</div>
                    </div>
                    <button class="tour-restart" id="tourRestart">‚ÑπÔ∏è Tour</button>
                </div>
                
                <div class="kpi-strip">
                    <div class="kpi-mini">
                        <div class="kpi-mini-label">Exposure</div>
                        <div class="kpi-mini-value red" id="kpiExposure">$127M</div>
                    </div>
                    <div class="kpi-mini">
                        <div class="kpi-mini-label">Nodes</div>
                        <div class="kpi-mini-value amber" id="kpiNodes">7</div>
                    </div>
                    <div class="kpi-mini">
                        <div class="kpi-mini-label">Protected</div>
                        <div class="kpi-mini-value" id="kpiProtected">$0</div>
                    </div>
                    <div class="kpi-mini">
                        <div class="kpi-mini-label">ROI</div>
                        <div class="kpi-mini-value" id="kpiROI">‚Äî</div>
                    </div>
                </div>
                
                <div class="chat-messages" id="chatMessages"></div>
                
                <div class="chips-section" id="chipsSection">
                    <div class="chips-label">Suggested Queries</div>
                    <div class="chips-grid" id="chipsGrid"></div>
                </div>
                
                <div class="chat-input-area" id="chatInputArea">
                    <div class="input-wrapper">
                        <input type="text" class="chat-input" id="chatInput" placeholder="Ask Nexus anything...">
                        <button class="send-btn" id="sendBtn">Send ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Tour Overlay (dim layer only) -->
    <div class="tour-overlay" id="tourOverlay"></div>

    <!-- Tour Card (always above dim + spotlight) -->
    <div class="tour-card" id="tourCard">

            <div class="tour-step-indicator" id="tourSteps"></div>
            <div class="tour-label" id="tourLabel"></div>
            <h2 class="tour-title" id="tourTitle"></h2>
            <div class="tour-content" id="tourContent"></div>
            <div class="tour-buttons" id="tourButtons"></div>
        
    </div>

    <!-- Spotlight -->
    <div class="tour-spotlight" id="tourSpotlight"></div>
    
    <!-- POC Modal -->
    <div class="poc-modal" id="pocModal">
        <div class="poc-modal-content">
            <h2 class="poc-modal-title">Request a Demonstration</h2>
            <p class="poc-modal-subtitle">See how Nexus can transform contested logistics intelligence for your operations.</p>
            <div class="poc-options">
                <div class="poc-option" onclick="window.location.href='mailto:hello@rebirthnexus.ai?subject=WIS Demo Request - Live Demo'">
                    <div class="poc-option-title">Schedule a Live Demo</div>
                    <div class="poc-option-desc">30-minute walkthrough with your specific scenarios and data requirements.</div>
                </div>
                <div class="poc-option" onclick="window.location.href='mailto:hello@rebirthnexus.ai?subject=WIS Demo Request - Pilot Program'">
                    <div class="poc-option-title">Pilot Program</div>
                    <div class="poc-option-desc">30-day pilot connecting your operational data for real-world validation.</div>
                </div>
            </div>
            <button class="poc-close" onclick="closePocModal()">Maybe Later</button>
        </div>
    </div>
    
    <script src="https://js.arcgis.com/4.28/"></script>
    <script src="demo-logic.js"></script>
    
    <!-- PASSWORD GATE SCRIPT -->
    <script>
        (function() {
            const DEMO_PASSWORD = 'ironwolf';
            const STORAGE_KEY = 'nexus_wis_auth';
            
            const gate = document.getElementById('passwordGate');
            const app = document.getElementById('appContainer');
            const input = document.getElementById('passwordInput');
            const btn = document.getElementById('passwordBtn');
            const error = document.getElementById('passwordError');
            
            // Check if already authenticated
            if (sessionStorage.getItem(STORAGE_KEY) === 'true') {
                gate.style.display = 'none';
                app.classList.add('authenticated');
            }
            
            function authenticate() {
                if (input.value === DEMO_PASSWORD) {
                    sessionStorage.setItem(STORAGE_KEY, 'true');
                    gate.style.display = 'none';
                    app.classList.add('authenticated');
                    error.classList.remove('show');
                } else {
                    input.classList.add('error');
                    error.classList.add('show');
                    setTimeout(() => input.classList.remove('error'), 400);
                    input.value = '';
                    input.focus();
                }
            }
            
            btn.addEventListener('click', authenticate);
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') authenticate();
            });
            
            input.focus();
        })();
    </script>
</body>
</html>
